Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Failed to parse intent end entities from ''. 
Failed to parse intent end entities from ''. 
Failed to parse intent end entities from ''. 
Failed to parse intent end entities from ''. 
Failed to parse intent end entities from ''. 
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Restoring parameters from models/current/nlu/intent_classifier_tensorflow_embedding.ckpt
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Restoring parameters from models/current/nlu/intent_classifier_tensorflow_embedding.ckpt
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Rasa process starting
Rasa process starting
Rasa process starting
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/default/model_20181106-165104/entity_synonyms.json'
  "".format(entity_synonyms_file))

Restoring parameters from models/nlu/default/model_20181106-165104/intent_classifier_tensorflow_embedding.ckpt
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Received user message '病历号为60222923,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9782099723815918}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message 'chenzhiyuan' with intent '{'name': None, 'confidence': 0.0}' and entities '[{'start': 0, 'end': 11, 'value': 'chenzhiyuan', 'entity': 'patient-name', 'confidence': 0.4121992162092151, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: chenzhiyuan)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message 'mintian' with intent '{'name': None, 'confidence': 0.0}' and entities '[{'start': 0, 'end': 7, 'value': 'mintian', 'entity': 'patient-name', 'confidence': 0.4121992162092151, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: chenzhiyuan
	requested_slot: admission-time
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: mintian)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '2016-6-8' with intent '{'name': 'inform', 'confidence': 0.9764254093170166}' and entities '[{'start': 0, 'end': 8, 'value': '2016-6-8', 'entity': 'admission-time', 'confidence': 0.982698894153401, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: mintian
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'entity_admission-time': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '2016-6-8' with intent '{'name': 'inform', 'confidence': 0.9764254093170166}' and entities '[{'start': 0, 'end': 8, 'value': '2016-6-8', 'entity': 'admission-time', 'confidence': 0.982698894153401, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 26 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: mintian
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'entity_admission-time': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/default/model_20181106-165104/entity_synonyms.json'
  "".format(entity_synonyms_file))

Restoring parameters from models/nlu/default/model_20181106-165104/intent_classifier_tensorflow_embedding.ckpt
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Received user message '查询患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9728026986122131}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '鲍正华' with intent '{'name': None, 'confidence': 0.0}' and entities '[{'start': 0, 'end': 3, 'value': '鲍正华', 'entity': 'patient-name', 'confidence': 0.4121992162092151, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 鲍正华)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '2016-6-8' with intent '{'name': 'inform', 'confidence': 0.9764254093170166}' and entities '[{'start': 0, 'end': 8, 'value': '2016-6-8', 'entity': 'admission-time', 'confidence': 0.982698894153401, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 鲍正华
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0}, {'prev_action_listen': 1.0, 'intent_inform': 1.0, 'active_form_request_form': 1.0, 'entity_admission-time': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/default/model_20181106-165104/entity_synonyms.json'
  "".format(entity_synonyms_file))

Restoring parameters from models/nlu/default/model_20181106-165104/intent_classifier_tensorflow_embedding.ckpt
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Received user message '我要查一下庞振国,电子病历' with intent '{'name': 'request_patient_emr', 'confidence': 0.9865661263465881}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '我要查一下庞振国,电子病历' with intent '{'name': 'request_patient_emr', 'confidence': 0.9865661263465881}' and entities '[]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 12 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 17 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '我要查一下住院号为82848466,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9782099723815918}' and entities '[]'
Logged UserUtterance - tracker now has 27 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '肖玉才' with intent '{'name': None, 'confidence': 0.0}' and entities '[{'start': 0, 'end': 3, 'value': '肖玉才', 'entity': 'patient-name', 'confidence': 0.4121992162092151, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 33 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 肖玉才)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.869 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '沈国红' with intent '{'name': 'inform', 'confidence': 0.9888615281359473}' and entities '[{'start': 0, 'end': 3, 'value': '沈国红', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 沈国红)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2017-12-23' with intent '{'name': 'inform', 'confidence': 0.9866708255971532}' and entities '[{'start': 0, 'end': 10, 'value': '2017 - 12 - 23', 'entity': 'admission-time', 'confidence': 0.9899446129092409, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 沈国红
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_inform': 1.0, 'active_form_request_form': 1.0, 'entity_admission-time': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.813 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我想查找患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9980543138312031}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'active_form_request_form': 1.0, 'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0, 'entity_admission-time': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.797 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '孙楠' with intent '{'name': 'inform', 'confidence': 0.9356639541598201}' and entities '[{'start': 0, 'end': 2, 'value': '孙楠', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 孙楠)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 孙楠
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_inform': 1.0, 'prev_action_listen': 1.0, 'active_form_request_form': 1.0, 'entity_admission-time': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.817 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-6' with intent '{'name': 'inform', 'confidence': 0.9855712814821694}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 6', 'entity': 'admission-time', 'confidence': 0.9949859688975913, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0, 'active_form_request_form': 1.0}, {'intent_inform': 1.0, 'prev_action_listen': 1.0, 'entity_admission-time': 1.0, 'active_form_request_form': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.922 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '大大' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.8700381212092897}' and entities '[{'start': 0, 'end': 2, 'value': '大大', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 大大)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.841 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.921 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.840 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0}, {'prev_action_listen': 1.0, 'entity_admission-time': 1.0, 'intent_inform': 1.0, 'active_form_request_form': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.853 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'entity_admission-time': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.839 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.815 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 刘 天伦
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 刘 天伦
 - admission-time: 2016 - 9 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: 2016 - 9 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: None
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is no memorised next action
There is no active form
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.814 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '留天' with intent '{'name': 'inform', 'confidence': 0.9888615281359473}' and entities '[{'start': 0, 'end': 2, 'value': '留天', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 留天)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 留天
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.964 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '长让' with intent '{'name': 'inform', 'confidence': 0.5515404360138202}' and entities '[{'start': 0, 'end': 2, 'value': '长 让', 'entity': 'disease-name', 'confidence': 0.536746885238406, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'active_form_request_form': 1.0, 'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'active_form_request_form': 1.0, 'entity_disease-name': 1.0, 'intent_inform': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '孙楠' with intent '{'name': 'inform', 'confidence': 0.9356639541598201}' and entities '[{'start': 0, 'end': 2, 'value': '孙楠', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 孙楠)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 孙楠
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.825 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3dbc45d4a8>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f3dbc45d4a8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3dbc45d4a8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3dbc45d4a8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.829 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fe6d0fd9400>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fe6d0fd9400>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fe6d0fd9400>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fe6d0fd9400>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.832 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '孙楠' with intent '{'name': 'inform', 'confidence': 0.9356639541598201}' and entities '[{'start': 0, 'end': 2, 'value': '孙楠', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 孙楠)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 孙楠
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.824 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '长三' with intent '{'name': 'inform', 'confidence': 0.9999663144925934}' and entities '[{'start': 0, 'end': 2, 'value': '长三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 长三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 长三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 长三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '李四' with intent '{'name': 'inform', 'confidence': 0.9976187810284654}' and entities '[{'start': 0, 'end': 2, 'value': '李四', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 28 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 李四)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 34 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 李四
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 李四
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.879 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.804 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.869 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.869 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.854 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.821 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.817 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.794 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.793 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.785 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '长三' with intent '{'name': 'inform', 'confidence': 0.9999663144925934}' and entities '[{'start': 0, 'end': 2, 'value': '长三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 长三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 长三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 长三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 长三
 - admission-time: 2016 - 6 - 6
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.805 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.789 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.781 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.802 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.831 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.792 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.810 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
'event' is not of type 'object'. Failed to validate Action server response from API, make sure your response from the Action endpoint is valid. For more information about the format visit https://rasa.com/docs/core/customactions/

Failed validating 'type' in schema['properties']['events']['items']:
    {'properties': {'event': {'type': 'string'}}, 'type': 'object'}

On instance['events'][3]:
    'event'
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 340, in run
    self._validate_action_result(response_data)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 274, in _validate_action_result
    raise e
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 266, in _validate_action_result
    validate(result, self.action_response_format_spec())
  File "/home/nick/anaconda3/lib/python3.6/site-packages/jsonschema/validators.py", line 541, in validate
    cls(schema, *args, **kwargs).validate(instance)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/jsonschema/validators.py", line 130, in validate
    raise error
jsonschema.exceptions.ValidationError: 'event' is not of type 'object'. Failed to validate Action server response from API, make sure your response from the Action endpoint is valid. For more information about the format visit https://rasa.com/docs/core/customactions/

Failed validating 'type' in schema['properties']['events']['items']:
    {'properties': {'event': {'type': 'string'}}, 'type': 'object'}

On instance['events'][3]:
    'event'
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.802 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.809 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-6' with intent '{'name': 'inform', 'confidence': 0.9855712814821694}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 6', 'entity': 'admission-time', 'confidence': 0.9949859688975913, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 6)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.799 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-10' with intent '{'name': 'inform', 'confidence': 0.9810975068105232}' and entities '[{'start': 0, 'end': 9, 'value': '2016 - 6 - 10', 'entity': 'admission-time', 'confidence': 0.988162505152101, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.823 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.806 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.868 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.805 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.924 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa process starting
Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.855 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 28 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 34 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.815 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '6016-6-9' with intent '{'name': 'inform', 'confidence': 0.9739783075890048}' and entities '[{'start': 0, 'end': 4, 'value': '6016', 'entity': 'medical-record-number', 'confidence': 0.971034867279079, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.789 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.957 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.810 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '掌声呢' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.9508820232454714}' and entities '[{'start': 0, 'end': 3, 'value': '掌声 呢', 'entity': 'disease-name', 'confidence': 0.536746885238406, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0, 'active_form_request_form': 1.0, 'entity_disease-name': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.985 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-1' with intent '{'name': 'inform', 'confidence': 0.9732578796717922}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 1', 'entity': 'admission-time', 'confidence': 0.9840826146828933, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 1)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.160 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.254 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: 2016 - 6 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: None
Current tracker state [{}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.834 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.156 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-8-7' with intent '{'name': 'inform', 'confidence': 0.9867290148595355}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 8 - 7', 'entity': 'admission-time', 'confidence': 0.9913517048035669, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 8 - 7)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.902 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f49be1d24e0>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f49be1d24e0>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f49be1d24e0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f49be1d24e0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is no memorised next action
There is no active form
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.878 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-4-5' with intent '{'name': 'inform', 'confidence': 0.980072076283722}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 4 - 5', 'entity': 'admission-time', 'confidence': 0.9934052429826767, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 4 - 5)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 4 - 5
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.924 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.994 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 28 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 34 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.933 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.001 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-7' with intent '{'name': 'inform', 'confidence': 0.9841204800749251}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 7', 'entity': 'admission-time', 'confidence': 0.9841124294198292, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 7)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.123 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.886 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.896 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.812 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fa5ccde4a58>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fa5ccde4a58>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fa5ccde4a58>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fa5ccde4a58>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.728 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-8' with intent '{'name': 'inform', 'confidence': 0.9856664020479056}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 8', 'entity': 'admission-time', 'confidence': 0.9861211212539422, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 8)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 8
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.723 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-7-9' with intent '{'name': 'inform', 'confidence': 0.9865897016616412}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 7 - 9', 'entity': 'admission-time', 'confidence': 0.9810927224148495, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 7 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 7 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 25 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.717 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.711 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.749 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.743 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-8' with intent '{'name': 'inform', 'confidence': 0.9856664020479056}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 8', 'entity': 'admission-time', 'confidence': 0.9861211212539422, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 8)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 8
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Inconsistent BILOU tagging found, B- tag, L- tag pair encloses multiple entity classes.i.e. [B-a, I-b, L-a] instead of [B-a, I-a, L-a].
Assuming B- class is correct.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，入院时间：2018-7-21，患者信息' with intent '{'name': 'inform', 'confidence': 0.32687378218342594}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'disease-name', 'confidence': 0.36554336433550727, 'extractor': 'ner_crf'}, {'start': 8, 'end': 17, 'value': '2018 - 7 - 21', 'entity': 'admission-time', 'confidence': 0.8422357610989293, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 25 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_inform': 1.0, 'entity_admission-time': 1.0, 'entity_disease-name': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看纪慕雪,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9746764790811261}' and entities '[]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.728 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看纪慕雪,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9746764790811261}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5347209545086788}' and entities '[{'start': 3, 'end': 5, 'value': '张 三', 'entity': 'patient-name', 'confidence': 0.38823675880936204, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 25 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'entity_patient-name': 1.0, 'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看纪慕雪,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9746764790811261}' and entities '[]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 36 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 42 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 53 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 59 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-8-9' with intent '{'name': 'inform', 'confidence': 0.9879242893449097}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 8 - 9', 'entity': 'admission-time', 'confidence': 0.9921844212291082, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 65 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 8 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 8 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.734 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5347209545086788}' and entities '[{'start': 3, 'end': 5, 'value': '张 三', 'entity': 'patient-name', 'confidence': 0.38823675880936204, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0, 'entity_patient-name': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9969308158930044}' and entities '[]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张娜' with intent '{'name': 'inform', 'confidence': 0.9974800381629139}' and entities '[{'start': 0, 'end': 2, 'value': '张娜', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 13 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张娜)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 19 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张娜
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张娜
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5347209545086788}' and entities '[{'start': 3, 'end': 5, 'value': '张 三', 'entity': 'patient-name', 'confidence': 0.38823675880936204, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0, 'entity_patient-name': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.726 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我想看张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.6431899737958973}' and entities '[{'start': 3, 'end': 5, 'value': '张 三', 'entity': 'patient-name', 'confidence': 0.3904282880148841, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'entity_patient-name': 1.0, 'intent_request_patient_info': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
