Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Failed to parse intent end entities from ''. 
Failed to parse intent end entities from ''. 
Failed to parse intent end entities from ''. 
Failed to parse intent end entities from ''. 
Failed to parse intent end entities from ''. 
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Restoring parameters from models/current/nlu/intent_classifier_tensorflow_embedding.ckpt
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Restoring parameters from models/current/nlu/intent_classifier_tensorflow_embedding.ckpt
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Rasa process starting
Rasa process starting
Rasa process starting
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/default/model_20181106-165104/entity_synonyms.json'
  "".format(entity_synonyms_file))

Restoring parameters from models/nlu/default/model_20181106-165104/intent_classifier_tensorflow_embedding.ckpt
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Received user message '病历号为60222923,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9782099723815918}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message 'chenzhiyuan' with intent '{'name': None, 'confidence': 0.0}' and entities '[{'start': 0, 'end': 11, 'value': 'chenzhiyuan', 'entity': 'patient-name', 'confidence': 0.4121992162092151, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: chenzhiyuan)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message 'mintian' with intent '{'name': None, 'confidence': 0.0}' and entities '[{'start': 0, 'end': 7, 'value': 'mintian', 'entity': 'patient-name', 'confidence': 0.4121992162092151, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: chenzhiyuan
	requested_slot: admission-time
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: mintian)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '2016-6-8' with intent '{'name': 'inform', 'confidence': 0.9764254093170166}' and entities '[{'start': 0, 'end': 8, 'value': '2016-6-8', 'entity': 'admission-time', 'confidence': 0.982698894153401, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: mintian
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'entity_admission-time': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '2016-6-8' with intent '{'name': 'inform', 'confidence': 0.9764254093170166}' and entities '[{'start': 0, 'end': 8, 'value': '2016-6-8', 'entity': 'admission-time', 'confidence': 0.982698894153401, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 26 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: mintian
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'entity_admission-time': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/default/model_20181106-165104/entity_synonyms.json'
  "".format(entity_synonyms_file))

Restoring parameters from models/nlu/default/model_20181106-165104/intent_classifier_tensorflow_embedding.ckpt
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Received user message '查询患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9728026986122131}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '鲍正华' with intent '{'name': None, 'confidence': 0.0}' and entities '[{'start': 0, 'end': 3, 'value': '鲍正华', 'entity': 'patient-name', 'confidence': 0.4121992162092151, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 鲍正华)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '2016-6-8' with intent '{'name': 'inform', 'confidence': 0.9764254093170166}' and entities '[{'start': 0, 'end': 8, 'value': '2016-6-8', 'entity': 'admission-time', 'confidence': 0.982698894153401, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 鲍正华
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0}, {'prev_action_listen': 1.0, 'intent_inform': 1.0, 'active_form_request_form': 1.0, 'entity_admission-time': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/default/model_20181106-165104/entity_synonyms.json'
  "".format(entity_synonyms_file))

Restoring parameters from models/nlu/default/model_20181106-165104/intent_classifier_tensorflow_embedding.ckpt
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Received user message '我要查一下庞振国,电子病历' with intent '{'name': 'request_patient_emr', 'confidence': 0.9865661263465881}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '我要查一下庞振国,电子病历' with intent '{'name': 'request_patient_emr', 'confidence': 0.9865661263465881}' and entities '[]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 12 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 17 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '我要查一下住院号为82848466,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9782099723815918}' and entities '[]'
Logged UserUtterance - tracker now has 27 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '肖玉才' with intent '{'name': None, 'confidence': 0.0}' and entities '[{'start': 0, 'end': 3, 'value': '肖玉才', 'entity': 'patient-name', 'confidence': 0.4121992162092151, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 33 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 肖玉才)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.869 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '沈国红' with intent '{'name': 'inform', 'confidence': 0.9888615281359473}' and entities '[{'start': 0, 'end': 3, 'value': '沈国红', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 沈国红)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2017-12-23' with intent '{'name': 'inform', 'confidence': 0.9866708255971532}' and entities '[{'start': 0, 'end': 10, 'value': '2017 - 12 - 23', 'entity': 'admission-time', 'confidence': 0.9899446129092409, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 沈国红
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_inform': 1.0, 'active_form_request_form': 1.0, 'entity_admission-time': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.813 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我想查找患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9980543138312031}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'active_form_request_form': 1.0, 'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0, 'entity_admission-time': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '21'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.797 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '孙楠' with intent '{'name': 'inform', 'confidence': 0.9356639541598201}' and entities '[{'start': 0, 'end': 2, 'value': '孙楠', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 孙楠)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 孙楠
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_inform': 1.0, 'prev_action_listen': 1.0, 'active_form_request_form': 1.0, 'entity_admission-time': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.817 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-6' with intent '{'name': 'inform', 'confidence': 0.9855712814821694}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 6', 'entity': 'admission-time', 'confidence': 0.9949859688975913, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0, 'active_form_request_form': 1.0}, {'intent_inform': 1.0, 'prev_action_listen': 1.0, 'entity_admission-time': 1.0, 'active_form_request_form': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.922 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '大大' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.8700381212092897}' and entities '[{'start': 0, 'end': 2, 'value': '大大', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 大大)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.841 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.921 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.840 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0}, {'prev_action_listen': 1.0, 'entity_admission-time': 1.0, 'intent_inform': 1.0, 'active_form_request_form': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.853 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'entity_admission-time': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.839 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.815 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '刘天伦' with intent '{'name': 'inform', 'confidence': 0.9991427271658893}' and entities '[{'start': 0, 'end': 3, 'value': '刘 天伦', 'entity': 'patient-name', 'confidence': 0.8040432506336185, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 刘 天伦)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 刘 天伦
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 刘 天伦
 - admission-time: 2016 - 9 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: 2016 - 9 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 刘 天伦
	requested_slot: None
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is no memorised next action
There is no active form
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.814 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '留天' with intent '{'name': 'inform', 'confidence': 0.9888615281359473}' and entities '[{'start': 0, 'end': 2, 'value': '留天', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 留天)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 留天
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.964 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '长让' with intent '{'name': 'inform', 'confidence': 0.5515404360138202}' and entities '[{'start': 0, 'end': 2, 'value': '长 让', 'entity': 'disease-name', 'confidence': 0.536746885238406, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'active_form_request_form': 1.0, 'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'active_form_request_form': 1.0, 'entity_disease-name': 1.0, 'intent_inform': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '孙楠' with intent '{'name': 'inform', 'confidence': 0.9356639541598201}' and entities '[{'start': 0, 'end': 2, 'value': '孙楠', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 孙楠)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 孙楠
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.825 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3dbc45d4a8>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f3dbc45d4a8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3dbc45d4a8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3dbc45d4a8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.829 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fe6d0fd9400>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fe6d0fd9400>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fe6d0fd9400>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fe6d0fd9400>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.832 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '孙楠' with intent '{'name': 'inform', 'confidence': 0.9356639541598201}' and entities '[{'start': 0, 'end': 2, 'value': '孙楠', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 孙楠)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 孙楠
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.824 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '长三' with intent '{'name': 'inform', 'confidence': 0.9999663144925934}' and entities '[{'start': 0, 'end': 2, 'value': '长三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 长三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 长三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 长三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '李四' with intent '{'name': 'inform', 'confidence': 0.9976187810284654}' and entities '[{'start': 0, 'end': 2, 'value': '李四', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 28 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 李四)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 34 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 李四
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 李四
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.879 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.804 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.869 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.869 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.854 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.821 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.817 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.794 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.793 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.785 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '长三' with intent '{'name': 'inform', 'confidence': 0.9999663144925934}' and entities '[{'start': 0, 'end': 2, 'value': '长三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 长三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 长三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 长三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 长三
 - admission-time: 2016 - 6 - 6
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.805 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.789 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.781 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.802 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.831 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.792 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.810 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
'event' is not of type 'object'. Failed to validate Action server response from API, make sure your response from the Action endpoint is valid. For more information about the format visit https://rasa.com/docs/core/customactions/

Failed validating 'type' in schema['properties']['events']['items']:
    {'properties': {'event': {'type': 'string'}}, 'type': 'object'}

On instance['events'][3]:
    'event'
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 340, in run
    self._validate_action_result(response_data)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 274, in _validate_action_result
    raise e
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 266, in _validate_action_result
    validate(result, self.action_response_format_spec())
  File "/home/nick/anaconda3/lib/python3.6/site-packages/jsonschema/validators.py", line 541, in validate
    cls(schema, *args, **kwargs).validate(instance)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/jsonschema/validators.py", line 130, in validate
    raise error
jsonschema.exceptions.ValidationError: 'event' is not of type 'object'. Failed to validate Action server response from API, make sure your response from the Action endpoint is valid. For more information about the format visit https://rasa.com/docs/core/customactions/

Failed validating 'type' in schema['properties']['events']['items']:
    {'properties': {'event': {'type': 'string'}}, 'type': 'object'}

On instance['events'][3]:
    'event'
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.802 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.809 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-6' with intent '{'name': 'inform', 'confidence': 0.9855712814821694}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 6', 'entity': 'admission-time', 'confidence': 0.9949859688975913, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 6)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.799 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-10' with intent '{'name': 'inform', 'confidence': 0.9810975068105232}' and entities '[{'start': 0, 'end': 9, 'value': '2016 - 6 - 10', 'entity': 'admission-time', 'confidence': 0.988162505152101, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.823 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.806 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.868 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.805 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.924 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa process starting
Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.855 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 28 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 34 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.815 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '6016-6-9' with intent '{'name': 'inform', 'confidence': 0.9739783075890048}' and entities '[{'start': 0, 'end': 4, 'value': '6016', 'entity': 'medical-record-number', 'confidence': 0.971034867279079, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.789 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.957 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.810 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '掌声呢' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.9508820232454714}' and entities '[{'start': 0, 'end': 3, 'value': '掌声 呢', 'entity': 'disease-name', 'confidence': 0.536746885238406, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0, 'active_form_request_form': 1.0, 'entity_disease-name': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.985 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-1' with intent '{'name': 'inform', 'confidence': 0.9732578796717922}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 1', 'entity': 'admission-time', 'confidence': 0.9840826146828933, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 1)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.160 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.254 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: 2016 - 6 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: None
Current tracker state [{}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.834 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.156 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-8-7' with intent '{'name': 'inform', 'confidence': 0.9867290148595355}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 8 - 7', 'entity': 'admission-time', 'confidence': 0.9913517048035669, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 8 - 7)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)', 'Restarted()']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.902 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f49be1d24e0>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f49be1d24e0>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f49be1d24e0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f49be1d24e0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is no memorised next action
There is no active form
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.878 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-4-5' with intent '{'name': 'inform', 'confidence': 0.980072076283722}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 4 - 5', 'entity': 'admission-time', 'confidence': 0.9934052429826767, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 4 - 5)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 4 - 5
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.924 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '22'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.994 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 28 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 34 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.933 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.001 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-7' with intent '{'name': 'inform', 'confidence': 0.9841204800749251}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 7', 'entity': 'admission-time', 'confidence': 0.9841124294198292, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 7)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.123 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.886 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.896 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.812 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fa5ccde4a58>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fa5ccde4a58>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fa5ccde4a58>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fa5ccde4a58>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.728 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-8' with intent '{'name': 'inform', 'confidence': 0.9856664020479056}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 8', 'entity': 'admission-time', 'confidence': 0.9861211212539422, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 8)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 8
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.723 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-7-9' with intent '{'name': 'inform', 'confidence': 0.9865897016616412}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 7 - 9', 'entity': 'admission-time', 'confidence': 0.9810927224148495, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 7 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 7 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 25 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.717 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.711 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.749 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.743 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-8' with intent '{'name': 'inform', 'confidence': 0.9856664020479056}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 8', 'entity': 'admission-time', 'confidence': 0.9861211212539422, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 8)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 8
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Inconsistent BILOU tagging found, B- tag, L- tag pair encloses multiple entity classes.i.e. [B-a, I-b, L-a] instead of [B-a, I-a, L-a].
Assuming B- class is correct.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，入院时间：2018-7-21，患者信息' with intent '{'name': 'inform', 'confidence': 0.32687378218342594}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'disease-name', 'confidence': 0.36554336433550727, 'extractor': 'ner_crf'}, {'start': 8, 'end': 17, 'value': '2018 - 7 - 21', 'entity': 'admission-time', 'confidence': 0.8422357610989293, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 25 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_inform': 1.0, 'entity_admission-time': 1.0, 'entity_disease-name': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看纪慕雪,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9746764790811261}' and entities '[]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.728 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看纪慕雪,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9746764790811261}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5347209545086788}' and entities '[{'start': 3, 'end': 5, 'value': '张 三', 'entity': 'patient-name', 'confidence': 0.38823675880936204, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 25 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'entity_patient-name': 1.0, 'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看纪慕雪,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9746764790811261}' and entities '[]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 36 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 42 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 53 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 59 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-8-9' with intent '{'name': 'inform', 'confidence': 0.9879242893449097}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 8 - 9', 'entity': 'admission-time', 'confidence': 0.9921844212291082, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 65 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 8 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 8 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.734 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5347209545086788}' and entities '[{'start': 3, 'end': 5, 'value': '张 三', 'entity': 'patient-name', 'confidence': 0.38823675880936204, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0, 'entity_patient-name': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9969308158930044}' and entities '[]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张娜' with intent '{'name': 'inform', 'confidence': 0.9974800381629139}' and entities '[{'start': 0, 'end': 2, 'value': '张娜', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 13 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张娜)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 19 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张娜
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张娜
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5347209545086788}' and entities '[{'start': 3, 'end': 5, 'value': '张 三', 'entity': 'patient-name', 'confidence': 0.38823675880936204, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0, 'entity_patient-name': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.726 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我想看张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.6431899737958973}' and entities '[{'start': 3, 'end': 5, 'value': '张 三', 'entity': 'patient-name', 'confidence': 0.3904282880148841, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'entity_patient-name': 1.0, 'intent_request_patient_info': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.722 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.732 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.37986812125582303}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.791 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要看纪慕雪,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9746764790811261}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.749 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'entity_patient-name': 1.0, 'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.745 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9986745439650078}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9686151266827085, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.850 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.077 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.225 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9986745439650078}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9686151266827085, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.804 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.820 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9986745439650078}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9686151266827085, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.931 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9986745439650078}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9686151266827085, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.779 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9986745439650078}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9686151266827085, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.802 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9986745439650078}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9686151266827085, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8b9ab517f0>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8b9ab517f0>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8b9ab517f0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8b9ab517f0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9986745439650078}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9686151266827085, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.743 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [{'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.722 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：6021758患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8181651235898125}' and entities '[{'start': 4, 'end': 11, 'value': '6021758', 'entity': 'medical-record-number', 'confidence': 0.9976438784343122, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 12 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 17 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 27 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 32 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9614666121500146}' and entities '[]'
Logged UserUtterance - tracker now has 38 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 41 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fecf1698588>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fecf1698588>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fecf1698588>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fecf1698588>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 44 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fecf168a7f0>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fecf168a7f0>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fecf168a7f0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fecf168a7f0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 47 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Action 'action_listen' was predicted after a user message using policy_0_KerasPolicy. Predicting fallback action: action_default_fallback
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '达到' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.9991762623533234}' and entities '[{'start': 0, 'end': 2, 'value': '达到', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 53 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 达到)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '大' with intent '{'name': 'inform', 'confidence': 0.9223574847712003}' and entities '[{'start': 0, 'end': 1, 'value': '大', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 59 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 达到
	requested_slot: admission-time
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 大)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 65 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 大
	requested_slot: admission-time
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 大
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 74 events
Current slot values: 
	admission-time: 2016 - 6 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 大
	requested_slot: None
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 大
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 83 events
Current slot values: 
	admission-time: 2016 - 6 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 大
	requested_slot: None
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 大
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.713 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.720 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '达到' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.9991762623533234}' and entities '[{'start': 0, 'end': 2, 'value': '达到', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 11 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '大大大' with intent '{'name': 'inform', 'confidence': 0.5321011094304323}' and entities '[{'start': 0, 'end': 3, 'value': '大大 大', 'entity': 'disease-name', 'confidence': 0.536746885238406, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'active_form_request_form': 1.0, 'intent_inform': 1.0, 'prev_action_listen': 1.0, 'entity_disease-name': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '达到' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.9991762623533234}' and entities '[{'start': 0, 'end': 2, 'value': '达到', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 达到)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'da' with intent '{'name': 'request_patient_related_literature', 'confidence': 0.7362125894433514}' and entities '[{'start': 0, 'end': 2, 'value': 'da', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 29 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 达到
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: da)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '大' with intent '{'name': 'inform', 'confidence': 0.9223574847712003}' and entities '[{'start': 0, 'end': 1, 'value': '大', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 35 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: da
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 大)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '大' with intent '{'name': 'inform', 'confidence': 0.9223574847712003}' and entities '[{'start': 0, 'end': 1, 'value': '大', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 41 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 大
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 大)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '积极' with intent '{'name': 'inform', 'confidence': 0.990360437843409}' and entities '[{'start': 0, 'end': 2, 'value': '积极', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 47 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 大
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 积极)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 53 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 积极
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 积极
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 64 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 71 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 78 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 85 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 92 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 99 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 106 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 113 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f0ba4397828>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f0ba4397828>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f0ba4397828>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f0ba4397828>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 120 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f0ba43b40b8>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f0ba43b40b8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f0ba43b40b8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f0ba43b40b8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 127 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 134 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 141 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 148 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 155 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 161 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'active_form_request_form': 1.0, 'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'active_form_request_form': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 167 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 173 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60217586,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60217586', 'entity': 'medical-record-number', 'confidence': 0.9931341633371832, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 184 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 190 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 193 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 196 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 199 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 202 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f0ba42ce7b8>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f0ba42ce7b8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f0ba42ce7b8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f0ba42ce7b8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 205 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 208 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 211 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Dumping model to file cache /tmp/jieba.cache
Loading model cost 1.275 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60194572,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60194572', 'entity': 'medical-record-number', 'confidence': 0.9892717033134523, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60194572,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60194572', 'entity': 'medical-record-number', 'confidence': 0.9892717033134523, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60194572,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60194572', 'entity': 'medical-record-number', 'confidence': 0.9892717033134523, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 16 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 28 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60194572,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60194572', 'entity': 'medical-record-number', 'confidence': 0.9892717033134523, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 39 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 45 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 51 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60194572,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60194572', 'entity': 'medical-record-number', 'confidence': 0.9892717033134523, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 62 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f7435791ef0>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f7435791ef0>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f7435791ef0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f7435791ef0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60194572,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60194572', 'entity': 'medical-record-number', 'confidence': 0.9892717033134523, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 69 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60194572,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60194572', 'entity': 'medical-record-number', 'confidence': 0.9892717033134523, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 76 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '病历号：60194572,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.8195067056446977}' and entities '[{'start': 4, 'end': 12, 'value': '60194572', 'entity': 'medical-record-number', 'confidence': 0.9892717033134523, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 83 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 90 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message ',患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.999997270031884}' and entities '[]'
Logged UserUtterance - tracker now has 97 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 103 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f743579a518>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f743579a518>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f743579a518>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f743579a518>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 106 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 112 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.795 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'entity_patient-name': 1.0, 'intent_inform': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: ('Connection aborted.', ConnectionResetError(104, 'Connection reset by peer'))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
urllib3.exceptions.ProtocolError: ('Connection aborted.', ConnectionResetError(104, 'Connection reset by peer'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', ConnectionResetError(104, 'Connection reset by peer'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 21 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 28 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 31 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.810 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，电子病历' with intent '{'name': 'request_patient_emr', 'confidence': 0.9947520885741148}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.4308166870385586, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 21 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 28 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 35 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 42 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fcf95e58b00>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fcf95e58b00>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fcf95e58b00>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fcf95e58b00>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 49 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 55 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 58 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 61 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: ('Connection aborted.', ConnectionResetError(104, 'Connection reset by peer'))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
urllib3.exceptions.ProtocolError: ('Connection aborted.', ConnectionResetError(104, 'Connection reset by peer'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', ConnectionResetError(104, 'Connection reset by peer'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 64 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 67 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 73 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 79 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 82 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 88 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 91 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'active_form_request_form': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.802 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 11 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'active_form_request_form': 1.0, 'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'active_form_request_form': 1.0, 'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 17 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'active_form_request_form': 1.0, 'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'active_form_request_form': 1.0, 'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 29 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 40 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 47 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三 ，
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 58 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 64 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 70 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 6 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 81 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 87 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 90 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.785 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.793 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - admission-time: 2016 - 9 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 25 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 32 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'SlotSet(key: requested_slot, value: department)']'
Bot utterance 'BotUttered(text: 请输入患者的科室, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '感染科' with intent '{'name': 'inform', 'confidence': 0.9937006468456127}' and entities '[{'start': 0, 'end': 3, 'value': '感染 科', 'entity': 'department', 'confidence': 0.7968989107338879, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 38 events
Current slot values: 
	admission-time: 2016 - 9 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: department
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '感染科' with intent '{'name': 'inform', 'confidence': 0.9937006468456127}' and entities '[{'start': 0, 'end': 3, 'value': '感染 科', 'entity': 'department', 'confidence': 0.7968989107338879, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 41 events
Current slot values: 
	admission-time: 2016 - 9 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: department
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.814 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 15 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 18 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.812 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9827365893783968}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'admission-time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'SlotSet(key: requested_slot, value: department)']'
Bot utterance 'BotUttered(text: 请输入患者的科室, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '感染科' with intent '{'name': 'inform', 'confidence': 0.9937006468456127}' and entities '[{'start': 0, 'end': 3, 'value': '感染 科', 'entity': 'department', 'confidence': 0.7968989107338879, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 15 events
Current slot values: 
	admission-time: 2016 - 6 - 6
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: department
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: department, value: 感染 科)', 'SlotSet(key: requested_slot, value: bed-number)']'
Bot utterance 'BotUttered(text: 请输入患者的床号, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '10216' with intent '{'name': 'inform', 'confidence': 0.9888615281359473}' and entities '[{'start': 0, 'end': 5, 'value': '10216', 'entity': 'bed-number', 'confidence': 0.5931913671341444, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 21 events
Current slot values: 
	admission-time: 2016 - 6 - 6
	bed-number: None
	department: 感染 科
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: bed-number
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '1023651' with intent '{'name': 'inform', 'confidence': 0.9888615281359473}' and entities '[{'start': 0, 'end': 7, 'value': '1023651', 'entity': 'bed-number', 'confidence': 0.6948365441372364, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 24 events
Current slot values: 
	admission-time: 2016 - 6 - 6
	bed-number: None
	department: 感染 科
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: bed-number
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.796 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: department)']'
Bot utterance 'BotUttered(text: 请输入患者的科室, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.783 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f918081d630>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f918081d630>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f918081d630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f918081d630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 16 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-5' with intent '{'name': 'inform', 'confidence': 0.9789256180814454}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 5', 'entity': 'admission-time', 'confidence': 0.9880562819389483, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 5)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三 ，
 - admission-time: 2016 - 6 - 5
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 34 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Inconsistent BILOU tagging found, B- tag, L- tag pair encloses multiple entity classes.i.e. [B-a, I-b, L-a] instead of [B-a, I-a, L-a].
Assuming B- class is correct.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，入院时间：2017-12-21，患者信息' with intent '{'name': 'inform', 'confidence': 0.3367104513088883}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'disease-name', 'confidence': 0.3655425586678744, 'extractor': 'ner_crf'}, {'start': 8, 'end': 18, 'value': '2017 - 12 - 21', 'entity': 'admission-time', 'confidence': 0.9140533563291647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 39 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'entity_disease-name': 1.0, 'intent_inform': 1.0, 'entity_admission-time': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9936717289009219}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 44 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 51 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三 ，
 - admission-time: 2016 - 9 - 9
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '神经外科,入院时间：2018-7-21,床号：1212,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5639503719820848}' and entities '[{'start': 0, 'end': 4, 'value': '神经外科', 'entity': 'department', 'confidence': 0.8763719569455202, 'extractor': 'ner_crf'}, {'start': 10, 'end': 19, 'value': '2018 - 7 - 21', 'entity': 'admission-time', 'confidence': 0.8439914019882847, 'extractor': 'ner_crf'}, {'start': 23, 'end': 27, 'value': '1212', 'entity': 'bed-number', 'confidence': 0.9469798329999979, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 62 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: admission-time, value: 2018 - 7 - 21)', 'SlotSet(key: requested_slot, value: department)']'
Bot utterance 'BotUttered(text: 请输入患者的科室, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '感染科' with intent '{'name': 'inform', 'confidence': 0.9937006468456127}' and entities '[{'start': 0, 'end': 3, 'value': '感染 科', 'entity': 'department', 'confidence': 0.7968989107338879, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 69 events
Current slot values: 
	admission-time: 2018 - 7 - 21
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: department
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: department, value: 感染 科)', 'SlotSet(key: requested_slot, value: bed-number)']'
Bot utterance 'BotUttered(text: 请输入患者的床号, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '1212' with intent '{'name': 'inform', 'confidence': 0.9914376054030409}' and entities '[{'start': 0, 'end': 4, 'value': '1212', 'entity': 'bed-number', 'confidence': 0.4785516971939319, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 75 events
Current slot values: 
	admission-time: 2018 - 7 - 21
	bed-number: None
	department: 感染 科
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: bed-number
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: bed-number, value: 1212)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: 2018 - 7 - 21
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '神经外科,入院时间：2018-7-21,床号：1212,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5639503719820848}' and entities '[{'start': 0, 'end': 4, 'value': '神经外科', 'entity': 'department', 'confidence': 0.8763719569455202, 'extractor': 'ner_crf'}, {'start': 10, 'end': 19, 'value': '2018 - 7 - 21', 'entity': 'admission-time', 'confidence': 0.8439914019882847, 'extractor': 'ner_crf'}, {'start': 23, 'end': 27, 'value': '1212', 'entity': 'bed-number', 'confidence': 0.9469798329999979, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 86 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '神经外科,入院时间：2018-7-21,床号：1212,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5639503719820848}' and entities '[{'start': 0, 'end': 4, 'value': '神经外科', 'entity': 'department', 'confidence': 0.8763719569455202, 'extractor': 'ner_crf'}, {'start': 10, 'end': 19, 'value': '2018 - 7 - 21', 'entity': 'admission-time', 'confidence': 0.8439914019882847, 'extractor': 'ner_crf'}, {'start': 23, 'end': 27, 'value': '1212', 'entity': 'bed-number', 'confidence': 0.9469798329999979, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 93 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '神经外科,入院时间：2018-7-21,床号：1212,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5639503719820848}' and entities '[{'start': 0, 'end': 4, 'value': '神经外科', 'entity': 'department', 'confidence': 0.8763719569455202, 'extractor': 'ner_crf'}, {'start': 10, 'end': 19, 'value': '2018 - 7 - 21', 'entity': 'admission-time', 'confidence': 0.8439914019882847, 'extractor': 'ner_crf'}, {'start': 23, 'end': 27, 'value': '1212', 'entity': 'bed-number', 'confidence': 0.9469798329999979, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 100 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '神经外科,入院时间：2018-7-21,床号：1212,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5639503719820848}' and entities '[{'start': 0, 'end': 4, 'value': '神经外科', 'entity': 'department', 'confidence': 0.8763719569455202, 'extractor': 'ner_crf'}, {'start': 10, 'end': 19, 'value': '2018 - 7 - 21', 'entity': 'admission-time', 'confidence': 0.8439914019882847, 'extractor': 'ner_crf'}, {'start': 23, 'end': 27, 'value': '1212', 'entity': 'bed-number', 'confidence': 0.9469798329999979, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 107 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '神经外科,入院时间：2018-7-21,床号：1212,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5639503719820848}' and entities '[{'start': 0, 'end': 4, 'value': '神经外科', 'entity': 'department', 'confidence': 0.8763719569455202, 'extractor': 'ner_crf'}, {'start': 10, 'end': 19, 'value': '2018 - 7 - 21', 'entity': 'admission-time', 'confidence': 0.8439914019882847, 'extractor': 'ner_crf'}, {'start': 23, 'end': 27, 'value': '1212', 'entity': 'bed-number', 'confidence': 0.9469798329999979, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 114 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: department, value: 神经外科)', 'SlotSet(key: admission-time, value: 2018 - 7 - 21)', 'SlotSet(key: bed-number, value: 1212)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: 2018 - 7 - 21
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 128 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 135 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 142 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 149 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 160 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.798 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '神经外科,入院时间：2018-7-21,床号：1212,患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.5639503719820848}' and entities '[{'start': 0, 'end': 4, 'value': '神经外科', 'entity': 'department', 'confidence': 0.8763719569455202, 'extractor': 'ner_crf'}, {'start': 10, 'end': 19, 'value': '2018 - 7 - 21', 'entity': 'admission-time', 'confidence': 0.8439914019882847, 'extractor': 'ner_crf'}, {'start': 23, 'end': 27, 'value': '1212', 'entity': 'bed-number', 'confidence': 0.9469798329999979, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: department, value: 神经外科)', 'SlotSet(key: admission-time, value: 2018 - 7 - 21)', 'SlotSet(key: bed-number, value: 1212)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - admission-time: 2018 - 7 - 21
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.804 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998710402213}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 9 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 25 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '查询相似病人' with intent '{'name': 'request_patient_similar_patient', 'confidence': 0.9972187265155732}' and entities '[]'
Logged UserUtterance - tracker now has 35 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Feature 'intent_request_patient_similar_patient' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_similar_patient': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '查询相似患者' with intent '{'name': 'request_patient_similar_patient', 'confidence': 0.9999998813856478}' and entities '[]'
Logged UserUtterance - tracker now has 40 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Feature 'intent_request_patient_similar_patient' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_similar_patient': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.860 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '住院号为82851326,相似患者' with intent '{'name': 'request_patient_similar_patient', 'confidence': 0.9938081040199271}' and entities '[{'start': 4, 'end': 12, 'value': '82851326', 'entity': 'hospital-number', 'confidence': 0.9936765609078428, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Feature 'intent_request_patient_similar_patient' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, None, None, {}, {'entity_hospital-number': 1.0, 'intent_request_patient_similar_patient': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '查看电子病历' with intent '{'name': 'request_patient_emr', 'confidence': 0.99999937841213}' and entities '[]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_emr': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '查看患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9998849660533796}' and entities '[]'
Logged UserUtterance - tracker now has 12 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/rasa_nlu/extractors/entity_synonyms.py:85: UserWarning: Failed to load synonyms file from 'models/nlu/current/entity_synonyms.json'
  "".format(entity_synonyms_file))

/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.799 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '差' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.912958768646012}' and entities '[{'start': 0, 'end': 1, 'value': '差', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_abnormal': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 差)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_abnormal': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9877884477641715}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 差
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_abnormal': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'SlotSet(key: requested_slot, value: laboratory-indicator)']'
Bot utterance 'BotUttered(text: 请输入需要查询的检验指标, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_abnormal': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '脑脊液葡萄糖' with intent '{'name': 'inform', 'confidence': 0.979646168970212}' and entities '[{'start': 0, 'end': 6, 'value': '脑脊液 葡萄糖', 'entity': 'disease-name', 'confidence': 0.5200759924432113, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 15 events
Current slot values: 
	admission-time: 2016 - 9 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 差
	requested_slot: laboratory-indicator
Current tracker state [None, None, None, {}, {'intent_request_patient_abnormal': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot laboratory-indicator with action request_form
Current tracker state [None, {}, {'intent_request_patient_abnormal': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_abnormal': 1.0, 'active_form_request_form': 1.0}, {'prev_action_listen': 1.0, 'intent_inform': 1.0, 'entity_disease-name': 1.0, 'active_form_request_form': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '电子病历' with intent '{'name': 'request_patient_emr', 'confidence': 0.999999893358582}' and entities '[]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.25842024433856164}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 26 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.25842024433856164 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9855712796006024}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 32 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_emr': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 6 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_emr': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_emr': 1.0}, {'intent_request_patient_emr': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '住院号为82851326,相似患者' with intent '{'name': 'request_patient_similar_patient', 'confidence': 0.9938081040199271}' and entities '[{'start': 4, 'end': 12, 'value': '82851326', 'entity': 'hospital-number', 'confidence': 0.9936765609078428, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 43 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Feature 'intent_request_patient_similar_patient' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, None, None, {}, {'entity_hospital-number': 1.0, 'prev_action_listen': 1.0, 'intent_request_patient_similar_patient': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Feature 'intent_request_patient_similar_patient' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Feature 'intent_request_patient_similar_patient' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, None, {}, {'entity_hospital-number': 1.0, 'prev_action_listen': 1.0, 'intent_request_patient_similar_patient': 1.0}, {'prev_request_form': 1.0, 'entity_hospital-number': 1.0, 'intent_request_patient_similar_patient': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Feature 'intent_request_patient_similar_patient' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Feature 'intent_request_patient_similar_patient' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Feature 'intent_request_patient_similar_patient' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, {}, {'entity_hospital-number': 1.0, 'prev_action_listen': 1.0, 'intent_request_patient_similar_patient': 1.0}, {'prev_request_form': 1.0, 'entity_hospital-number': 1.0, 'intent_request_patient_similar_patient': 1.0}, {'entity_hospital-number': 1.0, 'prev_utter_slots_values': 1.0, 'intent_request_patient_similar_patient': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.783 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9937456657471434}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.984081890590405}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'admission-time', 'confidence': 0.9863290430687551, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.815 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9937456657471434}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9866250504290532}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三 ，
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 9 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Inconsistent BILOU tagging found, B- tag, L- tag pair encloses multiple entity classes.i.e. [B-a, I-b, L-a] instead of [B-a, I-a, L-a].
Assuming B- class is correct.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，入院时间：2016-9-9，信息' with intent '{'name': 'inform', 'confidence': 0.2875547118522803}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'disease-name', 'confidence': 0.36554228541044076, 'extractor': 'ner_crf'}, {'start': 8, 'end': 16, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.9273165421336765, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 20 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.2875547118522803 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_inform': 1.0, 'entity_disease-name': 1.0, 'entity_admission-time': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.824133767863173}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'admission-time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 25 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.824133767863173}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'admission-time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 32 events
Current slot values: 
	admission-time: 2018 - 6 - 28
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.824133767863173}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'admission-time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 38 events
Current slot values: 
	admission-time: 2018 - 6 - 28
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.791 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.824133767863173}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'admission-time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.824133767863173}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'admission-time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9866250504290532}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 17 events
Current slot values: 
	admission-time: 2018 - 6 - 28
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9866250504290532}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'admission-time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: 2016 - 9 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.810 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9860908528528824}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9860908528528824}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 15 events
Current slot values: 
	admission-time: 2016 - 9 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: inspection-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 9 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2016 - 9 - 9
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 26 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 31 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 36 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 41 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 46 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-6' with intent '{'name': 'inform', 'confidence': 0.9803667300863358}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 6', 'entity': 'time', 'confidence': 0.9881227141447438, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 53 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 6)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9860908528528824}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 59 events
Current slot values: 
	admission-time: 2016 - 6 - 6
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: inspection-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 6 - 6
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2016 - 9 - 9
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 70 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.811 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.798 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998708762269}' and entities '[]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'request_patient_Medical_order', 'confidence': 0.24736754029099495}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 29 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
NLU confidence 0.24736754029099495 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.24736754029099495 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9860908528528824}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 35 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 9 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 46 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9937719311317313}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 60 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9860908528528824}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 67 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三 ，
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 9 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9937719311317313}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 78 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9860908528528824}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 85 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三 ，
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 9 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 96 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9937719311317313}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.3926240973355964, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 110 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'request_patient_Medical_order', 'confidence': 0.24736754029099495}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7890780993761182, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 117 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
NLU confidence 0.24736754029099495 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
NLU confidence 0.24736754029099495 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9860908528528824}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.994414711999626, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 123 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 9 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 134 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 148 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 162 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 169 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 174 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 181 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 188 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 202 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.899 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998708762269}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'def get_mappings_for_slot(self, slot_to_fill):' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.7087671189907024}' and entities '[{'start': 0, 'end': 30, 'value': 'def   get _ mappings _ for _ slot ( self', 'entity': 'laboratory-indicator', 'confidence': 0.7109663389814598, 'extractor': 'ner_crf'}, {'start': 31, 'end': 46, 'value': '  slot _ to _ fill ) :', 'entity': 'laboratory-indicator', 'confidence': 0.6241238194353499, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 16 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '# type: (Text) -> List[Dict[Text: Any]]' with intent '{'name': 'inform', 'confidence': 0.6591932589492903}' and entities '[{'start': 0, 'end': 39, 'value': '#   type :   ( text )   - >   list [ dict [ text :   any ] ]', 'entity': 'laboratory-indicator', 'confidence': 0.8821586034102684, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}, {'intent_request_patient_abnormal': 1.0, 'active_form_request_form': 1.0, 'prev_request_form': 1.0}, {'prev_action_listen': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '"""Get mappings for requested slot,' with intent '{'name': 'request_patient_related_literature', 'confidence': 0.36097822688711945}' and entities '[{'start': 0, 'end': 34, 'value': '" " " get   mappings   for   requested   slot', 'entity': 'laboratory-indicator', 'confidence': 0.6018431968753578, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 27 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'entity_laboratory-indicator': 1.0, 'intent_request_patient_related_literature': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'entity_laboratory-indicator': 1.0, 'intent_request_patient_related_literature': 1.0}, {'entity_laboratory-indicator': 1.0, 'prev_request_form': 1.0, 'intent_request_patient_related_literature': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'entity_laboratory-indicator': 1.0, 'intent_request_patient_related_literature': 1.0}, {'entity_laboratory-indicator': 1.0, 'prev_request_form': 1.0, 'intent_request_patient_related_literature': 1.0}, {'entity_laboratory-indicator': 1.0, 'intent_request_patient_related_literature': 1.0, 'prev_utter_slots_values': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'else map requested slot to an entity with the same name' with intent '{'name': 'request_patient_related_literature', 'confidence': 0.25596414471985407}' and entities '[{'start': 0, 'end': 55, 'value': 'else   map   requested   slot   to   an   entity   with   the   same   name', 'entity': 'laboratory-indicator', 'confidence': 0.8525373812871805, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 34 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
NLU confidence 0.25596414471985407 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'entity_laboratory-indicator': 1.0, 'intent_request_patient_related_literature': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '"""' with intent '{'name': 'request_patient_related_literature', 'confidence': 0.5110380703304916}' and entities '[{'start': 0, 'end': 3, 'value': '" " "', 'entity': 'disease-name', 'confidence': 0.5646134526702786, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 39 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'entity_disease-name': 1.0, 'intent_request_patient_related_literature': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'entity_disease-name': 1.0, 'intent_request_patient_related_literature': 1.0}, {'entity_disease-name': 1.0, 'prev_request_form': 1.0, 'intent_request_patient_related_literature': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Feature 'intent_request_patient_related_literature' (value: '1.0') could not be found in feature map. Make sure you added all intents and entities to the domain
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'entity_disease-name': 1.0, 'intent_request_patient_related_literature': 1.0}, {'entity_disease-name': 1.0, 'prev_request_form': 1.0, 'intent_request_patient_related_literature': 1.0}, {'entity_disease-name': 1.0, 'intent_request_patient_related_literature': 1.0, 'prev_utter_slots_values': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'requested_slot_mappings = self._to_list(' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.6046755263016114}' and entities '[{'start': 0, 'end': 40, 'value': 'requested _ slot _ mappings   =   self ._ to _ list (', 'entity': 'laboratory-indicator', 'confidence': 0.8706586113211604, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 46 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'self.slot_mappings().get(slot_to_fill,' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.6906724081159739}' and entities '[{'start': 0, 'end': 37, 'value': 'self . slot _ mappings ( ) . get ( slot _ to _ fill', 'entity': 'laboratory-indicator', 'confidence': 0.6882761910934266, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 52 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}, {'intent_request_patient_abnormal': 1.0, 'active_form_request_form': 1.0, 'prev_request_form': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0, 'active_form_request_form': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'self.from_entity(slot_to_fill))' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.6693597850122839}' and entities '[{'start': 0, 'end': 31, 'value': 'self . from _ entity ( slot _ to _ fill ) )', 'entity': 'laboratory-indicator', 'confidence': 0.8526782287491887, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 57 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message ')' with intent '{'name': 'inform', 'confidence': 0.5200569907507074}' and entities '[{'start': 0, 'end': 1, 'value': ')', 'entity': 'patient-name', 'confidence': 0.7799796568099876, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 63 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: ))', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '# check provided slot mappings' with intent '{'name': 'inform', 'confidence': 0.5599730309690468}' and entities '[{'start': 0, 'end': 30, 'value': '#   check   provided   slot   mappings', 'entity': 'laboratory-indicator', 'confidence': 0.8511050914488097, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 69 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: )
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot admission-time with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}, {'intent_request_patient_abnormal': 1.0, 'active_form_request_form': 1.0, 'prev_request_form': 1.0}, {'prev_action_listen': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'for requested_slot_mapping in requested_slot_mappings:' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.4416472522345808}' and entities '[{'start': 0, 'end': 54, 'value': 'for   requested _ slot _ mapping   in   requested _ slot _ mappings :', 'entity': 'laboratory-indicator', 'confidence': 0.8736069109458603, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 74 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'if (not isinstance(requested_slot_mapping, dict) or' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.45681974825327076}' and entities '[{'start': 0, 'end': 41, 'value': 'if   ( not   isinstance ( requested _ slot _ mapping', 'entity': 'laboratory-indicator', 'confidence': 0.7387438033862027, 'extractor': 'ner_crf'}, {'start': 42, 'end': 51, 'value': '  dict )   or', 'entity': 'laboratory-indicator', 'confidence': 0.59332890566994, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 80 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}, {'intent_request_patient_abnormal': 1.0, 'active_form_request_form': 1.0, 'prev_request_form': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0, 'active_form_request_form': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'requested_slot_mapping.get("type") is None):' with intent '{'name': 'request_patient_abnormal', 'confidence': 0.5532629616248912}' and entities '[{'start': 0, 'end': 44, 'value': 'requested _ slot _ mapping . get ( " type " )   is   none ) :', 'entity': 'laboratory-indicator', 'confidence': 0.8642438192838042, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 85 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'raise TypeError("Provided incompatible slot mapping")' with intent '{'name': 'inform', 'confidence': 0.4077077843434749}' and entities '[{'start': 0, 'end': 53, 'value': 'raise   typeerror ( " provided   incompatible   slot   mapping " )', 'entity': 'laboratory-indicator', 'confidence': 0.8312844710020462, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 91 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to validate slot patient-name with action request_form
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_abnormal': 1.0}, {'intent_request_patient_abnormal': 1.0, 'active_form_request_form': 1.0, 'prev_request_form': 1.0}, {'prev_action_listen': 1.0, 'active_form_request_form': 1.0, 'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is an active form 'request_form'
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 96 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message 'return requested_slot_mappings我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_inspection_report', 'confidence': 0.24083845827445938}' and entities '[{'start': 0, 'end': 30, 'value': 'return   requested _ slot _ mappings', 'entity': 'laboratory-indicator', 'confidence': 0.6879442455152446, 'extractor': 'ner_crf'}, {'start': 34, 'end': 37, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9586357202376986, 'extractor': 'ner_crf'}, {'start': 43, 'end': 52, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9030322608664003, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 101 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.24083845827445938 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'intent_request_patient_inspection_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 106 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 120 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 134 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 148 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.827 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 16 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8275904645799641}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9604877931750931, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.903032260861581, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.800 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9981696271133312}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.645897047695039, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9586805503569485}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9941536198172144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.797 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三。患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9980350887923193}' and entities '[{'start': 0, 'end': 3, 'value': '张三 。', 'entity': 'patient-name', 'confidence': 0.645897047695039, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 。)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9586805503569485}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9941536198172144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 。
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9981696271133312}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.645897047695039, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 17 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.821 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9981696271133312}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.645897047695039, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.855 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9981696271133312}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.645897047695039, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9049536975834835}' and entities '[{'start': 4, 'end': 8, 'value': '郝月兰 ,', 'entity': 'patient-name', 'confidence': 0.918991377846294, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9773453267254247, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，李四，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9873300560398917}' and entities '[{'start': 0, 'end': 6, 'value': '张三 ， 李四 ，', 'entity': 'laboratory-indicator', 'confidence': 0.42395985588166113, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 16 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.999999828470946}' and entities '[]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.813 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.999999828470946}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.999999828470946}' and entities '[]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.999999828470946}' and entities '[]'
Logged UserUtterance - tracker now has 16 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.999999828470946}' and entities '[]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9981696271133312}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.645897047695039, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.999999828470946}' and entities '[]'
Logged UserUtterance - tracker now has 37 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9981696271133312}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.645897047695039, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 44 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9981696271133312}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.645897047695039, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 51 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三 ，)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9586805503569485}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9941536198172144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 58 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三 ，
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.795 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9630766431324843}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 17 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.791 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-8' with intent '{'name': 'inform', 'confidence': 0.972874485071921}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 8', 'entity': 'time', 'confidence': 0.9970801308940769, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 8)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 1.000 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.992369855608522}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.780363319822807, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8e9b79c710>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8e9b79c710>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8e9b79c710>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8e9b79c710>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9630766431324843}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '李四患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9992275353864855}' and entities '[{'start': 0, 'end': 2, 'value': '李四', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 27 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [{'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.828 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-8' with intent '{'name': 'inform', 'confidence': 0.972874485071921}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 8', 'entity': 'time', 'confidence': 0.9970801308940769, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 8)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '李四患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9992275353864855}' and entities '[{'start': 0, 'end': 2, 'value': '李四', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 17 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 李四)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2013-8-9' with intent '{'name': 'inform', 'confidence': 0.9747616612363902}' and entities '[{'start': 0, 'end': 8, 'value': '2013 - 8 - 9', 'entity': 'time', 'confidence': 0.9443998627588123, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 24 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 李四
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.812 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998437278235}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3b74e18518>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f3b74e18518>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3b74e18518>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3b74e18518>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '0'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998437278235}' and entities '[]'
Logged UserUtterance - tracker now has 7 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [{}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.9895631221730123}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7369984342255125, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 13 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [{}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [{}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-8-9' with intent '{'name': 'inform', 'confidence': 0.9728744879771118}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 8 - 9', 'entity': 'time', 'confidence': 0.9961296941084544, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 19 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [{}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 8 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '李四患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9992275353864855}' and entities '[{'start': 0, 'end': 2, 'value': '李四', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 27 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 李四)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9630766431324843}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 34 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 李四
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三入院时间为2015-8-9患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.7112925823887457}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9745076405669464, 'extractor': 'ner_crf'}, {'start': 2, 'end': 6, 'value': '入院 时间', 'entity': 'time_type', 'confidence': 0.9995805268552642, 'extractor': 'ner_crf'}, {'start': 7, 'end': 15, 'value': '2015 - 8 - 9', 'entity': 'time', 'confidence': 0.9448247730201885, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 42 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9630766431324843}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 49 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 52 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 55 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 58 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 61 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 64 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 67 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3b74d2de10>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f3b74d2de10>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3b74d2de10>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f3b74d2de10>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998437278235}' and entities '[]'
Logged UserUtterance - tracker now has 70 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.992369855608522}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.780363319822807, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 73 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.794 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三，患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.992369855608522}' and entities '[{'start': 0, 'end': 3, 'value': '张三 ，', 'entity': 'patient-name', 'confidence': 0.780363319822807, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 16 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998437278235}' and entities '[]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9984460307810031}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.9204437080765647, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998437278235}' and entities '[]'
Logged UserUtterance - tracker now has 37 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.9895631221730123}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7369984342255125, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 43 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-6-9' with intent '{'name': 'inform', 'confidence': 0.9764222568971346}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 6 - 9', 'entity': 'time', 'confidence': 0.9961576911383507, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 49 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 6 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8867616327729179}' and entities '[{'start': 4, 'end': 8, 'value': '郝月兰 ,', 'entity': 'patient-name', 'confidence': 0.8128165758205054, 'extractor': 'ner_crf'}, {'start': 8, 'end': 12, 'value': '入院 时间', 'entity': 'time_type', 'confidence': 0.9988993021053055, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.978281333042051, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 57 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰 ,)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9630766431324843}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 64 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰 ,
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9630766431324843}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 70 events
Current slot values: 
	admission-time: 2016 - 9 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰 ,
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: inspection-time, value: 2016 - 9 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8867616327729179}' and entities '[{'start': 4, 'end': 8, 'value': '郝月兰 ,', 'entity': 'patient-name', 'confidence': 0.8128165758205054, 'extractor': 'ner_crf'}, {'start': 8, 'end': 12, 'value': '入院 时间', 'entity': 'time_type', 'confidence': 0.9988993021053055, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.978281333042051, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 78 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8867616327729179}' and entities '[{'start': 4, 'end': 8, 'value': '郝月兰 ,', 'entity': 'patient-name', 'confidence': 0.8128165758205054, 'extractor': 'ner_crf'}, {'start': 8, 'end': 12, 'value': '入院 时间', 'entity': 'time_type', 'confidence': 0.9988993021053055, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.978281333042051, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 85 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8867616327729179}' and entities '[{'start': 4, 'end': 8, 'value': '郝月兰 ,', 'entity': 'patient-name', 'confidence': 0.8128165758205054, 'extractor': 'ner_crf'}, {'start': 8, 'end': 12, 'value': '入院 时间', 'entity': 'time_type', 'confidence': 0.9988993021053055, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.978281333042051, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 92 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f5d0da7f2e8>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f5d0da7f2e8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f5d0da7f2e8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f5d0da7f2e8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8867616327729179}' and entities '[{'start': 4, 'end': 8, 'value': '郝月兰 ,', 'entity': 'patient-name', 'confidence': 0.8128165758205054, 'extractor': 'ner_crf'}, {'start': 8, 'end': 12, 'value': '入院 时间', 'entity': 'time_type', 'confidence': 0.9988993021053055, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.978281333042051, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 99 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8867616327729179}' and entities '[{'start': 4, 'end': 8, 'value': '郝月兰 ,', 'entity': 'patient-name', 'confidence': 0.8128165758205054, 'extractor': 'ner_crf'}, {'start': 8, 'end': 12, 'value': '入院 时间', 'entity': 'time_type', 'confidence': 0.9988993021053055, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.978281333042051, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 106 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰,入院时间为2018-6-28,检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.8867616327729179}' and entities '[{'start': 4, 'end': 8, 'value': '郝月兰 ,', 'entity': 'patient-name', 'confidence': 0.8128165758205054, 'extractor': 'ner_crf'}, {'start': 8, 'end': 12, 'value': '入院 时间', 'entity': 'time_type', 'confidence': 0.9988993021053055, 'extractor': 'ner_crf'}, {'start': 13, 'end': 22, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.978281333042051, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 113 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 120 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
Received user message '' with intent '{'name': None, 'confidence': 0.0}' and entities '[]'
Logged UserUtterance - tracker now has 125 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.0 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.714 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '"nlp_spacy",' with intent '{'name': 'inform', 'confidence': 0.9840480859551932}' and entities '[{'start': 0, 'end': 12, 'value': '" nlp _ spacy " ,', 'entity': 'laboratory-indicator', 'confidence': 0.7176796962306363, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}, {'intent_inform': 1.0, 'prev_utter_slots_values': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '"tokenizer_spacy",' with intent '{'name': 'inform', 'confidence': 0.9840480859551932}' and entities '[{'start': 0, 'end': 18, 'value': '" tokenizer _ spacy " ,', 'entity': 'laboratory-indicator', 'confidence': 0.7176796962306363, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37c1e78390>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f37c1e78390>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37c1e78390>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37c1e78390>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}, {'intent_inform': 1.0, 'prev_utter_slots_values': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '"intent_featurizer_spacy",' with intent '{'name': 'inform', 'confidence': 0.952605721270385}' and entities '[{'start': 0, 'end': 26, 'value': '" intent _ featurizer _ spacy " ,', 'entity': 'laboratory-indicator', 'confidence': 0.7620300457084725, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 16 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37c1e7a7f0>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f37c1e7a7f0>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37c1e7a7f0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37c1e7a7f0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}, {'intent_inform': 1.0, 'prev_utter_slots_values': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '"intent_entity_featurizer_regex",' with intent '{'name': 'inform', 'confidence': 0.8657190853150992}' and entities '[{'start': 0, 'end': 33, 'value': '" intent _ entity _ featurizer _ regex " ,', 'entity': 'laboratory-indicator', 'confidence': 0.778306098611798, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 23 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37eb7f0cf8>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f37eb7f0cf8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37eb7f0cf8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37eb7f0cf8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}, {'intent_inform': 1.0, 'prev_utter_slots_values': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '"ner_crf",' with intent '{'name': 'inform', 'confidence': 0.9978927537819644}' and entities '[{'start': 0, 'end': 10, 'value': '" ner _ crf " ,', 'entity': 'laboratory-indicator', 'confidence': 0.7188694202891552, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 30 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37eb723d30>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f37eb723d30>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37eb723d30>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37eb723d30>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}, {'intent_inform': 1.0, 'prev_utter_slots_values': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '"ner_synonyms",' with intent '{'name': 'inform', 'confidence': 0.9978927537819644}' and entities '[{'start': 0, 'end': 15, 'value': '" ner _ synonyms " ,', 'entity': 'laboratory-indicator', 'confidence': 0.7188694202891552, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 37 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Couldn't connect to the server at 'http://localhost:5055/webhook'. Is the server running? Error: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37c1eb4fd0>: Failed to establish a new connection: [Errno 111] Connection refused',))
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f37c1eb4fd0>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37c1eb4fd0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=5055): Max retries exceeded with url: /webhook (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f37c1eb4fd0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 348, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_inform': 1.0, 'entity_laboratory-indicator': 1.0, 'prev_action_listen': 1.0}, {'intent_inform': 1.0, 'prev_request_form': 1.0, 'entity_laboratory-indicator': 1.0}, {'intent_inform': 1.0, 'prev_utter_slots_values': 1.0, 'entity_laboratory-indicator': 1.0}]
There is no memorised next action
There is no active form
Predicted next action using policy_0_KerasPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '"intent_classifier_sklearn",我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.34268133887310565}' and entities '[{'start': 0, 'end': 28, 'value': '" intent _ classifier _ sklearn " ,', 'entity': 'laboratory-indicator', 'confidence': 0.4276793638279656, 'extractor': 'ner_crf'}, {'start': 32, 'end': 35, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9795197399273711, 'extractor': 'ner_crf'}, {'start': 35, 'end': 39, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995423646083966, 'extractor': 'ner_crf'}, {'start': 40, 'end': 49, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665732567122, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 44 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'intent_request_patient_laboratory_report': 1.0, 'prev_action_listen': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 51 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9594958610250773}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 59 events
Current slot values: 
	admission-time: 2018 - 6 - 28
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: inspection-time, value: 2016 - 9 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 67 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9594958610250773}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 75 events
Current slot values: 
	admission-time: 2018 - 6 - 28
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: inspection-time, value: 2016 - 9 - 9)', 'Restarted()', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 83 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-5-9' with intent '{'name': 'inform', 'confidence': 0.9663660365485512}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 5 - 9', 'entity': 'time', 'confidence': 0.9962164974718899, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 91 events
Current slot values: 
	admission-time: 2018 - 6 - 28
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: inspection-time, value: 2016 - 5 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2016 - 5 - 9
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.749 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 9 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9594958610250773}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 16 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-8' with intent '{'name': 'inform', 'confidence': 0.9699612928677774}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 8', 'entity': 'time', 'confidence': 0.9970801308940769, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 22 events
Current slot values: 
	admission-time: 2016 - 9 - 9
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: inspection-time, value: 2016 - 9 - 8)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 9 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2016 - 9 - 8
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 33 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 40 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 47 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 54 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 61 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 68 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 75 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 82 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 387, in _make_request
    six.raise_from(e, None)
  File "<string>", line 2, in raise_from
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 383, in _make_request
    httplib_response = conn.getresponse()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 1331, in getresponse
    response.begin()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 297, in begin
    version, status, reason = self._read_status()
  File "/home/nick/anaconda3/lib/python3.6/http/client.py", line 258, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/nick/anaconda3/lib/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/util/retry.py", line 357, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/packages/six.py", line 686, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 389, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/urllib3/connectionpool.py", line 309, in _raise_timeout
    raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 327, in run
    json=json, method="post", timeout=DEFAULT_REQUEST_TIMEOUT)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/utils.py", line 748, in request
    **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='localhost', port=5055): Read timed out. (read timeout=300)
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 89 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 96 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 103 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 110 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 117 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Failed to run custom action 'request_form'. Action server responded with a non 200 status code of 500. Make sure your action server properly runs actions and returns a 200 once the action is executed. Error: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook
Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
Failed to execute custom action.
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 338, in run
    response.raise_for_status()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/requests/models.py", line 940, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://localhost:5055/webhook

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 358, in run
    raise Exception("Failed to execute custom action.")
Exception: Failed to execute custom action.
Action 'request_form' ended with events '[]'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: None
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.9143135479484006}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370941009807, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524508939891, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665740135276, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 124 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: requested_slot, value: inspection-time)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者检验时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9594958610250773}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 131 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: inspection-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: inspection-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2016 - 9 - 9
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28送检时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.7413581117714506}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370811771187, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524235205744, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9939341806543881, 'extractor': 'ner_crf'}, {'start': 21, 'end': 25, 'value': '送检 时间', 'entity': 'time-type', 'confidence': 0.9993269988156619, 'extractor': 'ner_crf'}, {'start': 26, 'end': 35, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665748772536, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 142 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: None
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28送检时间为2018-6-28检验报告' with intent '{'name': 'request_patient_laboratory_report', 'confidence': 0.7413581117714506}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370811771187, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524235205744, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9939341806543881, 'extractor': 'ner_crf'}, {'start': 21, 'end': 25, 'value': '送检 时间', 'entity': 'time-type', 'confidence': 0.9993269988156619, 'extractor': 'ner_crf'}, {'start': 26, 'end': 35, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9990665748772536, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 154 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: admission-time, value: 2018 - 6 - 28)', 'SlotSet(key: inspection-time, value: 2018 - 6 - 28)', 'SlotSet(key: patient-name, value: 郝月兰)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2018 - 6 - 28
 - bed-number: None
 - inspection-name: None
 - inspection-time: 2018 - 6 - 28
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_laboratory_report': 1.0}, {'intent_request_patient_laboratory_report': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_laboratory_report': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间为2018-6-28送检时间为2018-6-28患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.23672811317258338}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9808370811771199, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9995524235205749, 'extractor': 'ner_crf'}, {'start': 12, 'end': 21, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9939341806332529, 'extractor': 'ner_crf'}, {'start': 21, 'end': 25, 'value': '送检 时间', 'entity': 'time-type', 'confidence': 0.9993269980405833, 'extractor': 'ner_crf'}, {'start': 26, 'end': 35, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9992571755858861, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 168 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
NLU confidence 0.23672811317258338 is lower than NLU threshold 0.3. Predicting fallback action: action_default_fallback
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_1_FallbackPolicy
Predicted next action 'action_default_fallback' with prob 1.00.
Action 'action_default_fallback' ended with events '['UserUtteranceReverted()']'
Bot utterance 'BotUttered(text: 抱歉，我好像听不懂你说的, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '我要查看郝月兰入院时间送检时间为2018-6-28患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.7297250760073213}' and entities '[{'start': 4, 'end': 7, 'value': '郝月兰', 'entity': 'patient-name', 'confidence': 0.9793919420996263, 'extractor': 'ner_crf'}, {'start': 7, 'end': 11, 'value': '入院 时间', 'entity': 'time-type', 'confidence': 0.9919692038295305, 'extractor': 'ner_crf'}, {'start': 11, 'end': 15, 'value': '送检 时间', 'entity': 'time-type', 'confidence': 0.9993175127610517, 'extractor': 'ner_crf'}, {'start': 16, 'end': 25, 'value': '2018 - 6 - 28', 'entity': 'time', 'confidence': 0.9992571748225366, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 173 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: patient-name, value: 郝月兰)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-5-9' with intent '{'name': 'inform', 'confidence': 0.9663660365485512}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 5 - 9', 'entity': 'time', 'confidence': 0.9962164974718899, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 180 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 郝月兰
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 5 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 郝月兰
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 5 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
The model predicted the custom action 'request_form' but you didn't configure an endpoint to run this custom action. Please take a look at the docs and set an endpoint configuration. https://rasa.com/docs/core/customactions/
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 321, in run
    "".format(self.name(), DOCS_BASE_URL))
Exception: The model predicted the custom action 'request_form' but you didn't configure an endpoint to run this custom action. Please take a look at the docs and set an endpoint configuration. https://rasa.com/docs/core/customactions/
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
The model predicted the custom action 'request_form' but you didn't configure an endpoint to run this custom action. Please take a look at the docs and set an endpoint configuration. https://rasa.com/docs/core/customactions/
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 321, in run
    "".format(self.name(), DOCS_BASE_URL))
Exception: The model predicted the custom action 'request_form' but you didn't configure an endpoint to run this custom action. Please take a look at the docs and set an endpoint configuration. https://rasa.com/docs/core/customactions/
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
The model predicted the custom action 'request_form' but you didn't configure an endpoint to run this custom action. Please take a look at the docs and set an endpoint configuration. https://rasa.com/docs/core/customactions/
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 321, in run
    "".format(self.name(), DOCS_BASE_URL))
Exception: The model predicted the custom action 'request_form' but you didn't configure an endpoint to run this custom action. Please take a look at the docs and set an endpoint configuration. https://rasa.com/docs/core/customactions/
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_CmdlineInput.health                 OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.753 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998430170107}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Rasa Core server is up and running on http://localhost:5005
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
The model predicted the custom action 'request_form' but you didn't configure an endpoint to run this custom action. Please take a look at the docs and set an endpoint configuration. https://rasa.com/docs/core/customactions/
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 321, in run
    "".format(self.name(), DOCS_BASE_URL))
Exception: The model predicted the custom action 'request_form' but you didn't configure an endpoint to run this custom action. Please take a look at the docs and set an endpoint configuration. https://rasa.com/docs/core/customactions/
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Encountered an exception while running action 'request_form'. Bot will continue, but the actions events are lost. Make sure to fix the exception in your custom code.
The model predicted the custom action 'request_form' but you didn't configure an endpoint to run this custom action. Please take a look at the docs and set an endpoint configuration. https://rasa.com/docs/core/customactions/
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 351, in _run_action
    events = action.run(dispatcher, tracker, self.domain)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/actions/action.py", line 321, in run
    "".format(self.name(), DOCS_BASE_URL))
Exception: The model predicted the custom action 'request_form' but you didn't configure an endpoint to run this custom action. Please take a look at the docs and set an endpoint configuration. https://rasa.com/docs/core/customactions/
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_CmdlineInput.receive                OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.805 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998430170107}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.983106471847518}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7369984342255125, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2016-9-9' with intent '{'name': 'inform', 'confidence': 0.9594958610250773}' and entities '[{'start': 0, 'end': 8, 'value': '2016 - 9 - 9', 'entity': 'time', 'confidence': 0.9962821427866144, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张三
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2016 - 9 - 9)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张三
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2016 - 9 - 9
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, GET, OPTIONS             /static/[filename]
custom_webhook_RestInput.health                    HEAD, GET, OPTIONS             /webhooks/rest/
custom_webhook_RestInput.receive                   POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Exception on /webhooks/rest/webhook [POST]
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 328, in receive
    sender_id = self._extract_sender(request)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 296, in _extract_sender
    return req.json.get("sender", None)
AttributeError: 'NoneType' object has no attribute 'get'
Exception on /webhooks/rest/webhook [POST]
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 328, in receive
    sender_id = self._extract_sender(request)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 296, in _extract_sender
    return req.json.get("sender", None)
AttributeError: 'NoneType' object has no attribute 'get'
Exception on /webhooks/rest/webhook [POST]
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 328, in receive
    sender_id = self._extract_sender(request)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 296, in _extract_sender
    return req.json.get("sender", None)
AttributeError: 'NoneType' object has no attribute 'get'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             HEAD, OPTIONS, GET             /static/[filename]
custom_webhook_CmdlineInput.health                 HEAD, OPTIONS, GET             /webhooks/rest/
custom_webhook_CmdlineInput.receive                POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_RestInput.health                    OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_RestInput.receive                   POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5005
Exception on /webhooks/rest/webhook [POST]
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 328, in receive
    sender_id = self._extract_sender(request)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 296, in _extract_sender
    return req.json.get("sender", None)
AttributeError: 'NoneType' object has no attribute 'get'
Exception on /webhooks/rest/webhook [POST]
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 328, in receive
    sender_id = self._extract_sender(request)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 296, in _extract_sender
    return req.json.get("sender", None)
AttributeError: 'NoneType' object has no attribute 'get'
Exception on /webhooks/rest/webhook [POST]
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 328, in receive
    sender_id = self._extract_sender(request)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 296, in _extract_sender
    return req.json.get("sender", None)
AttributeError: 'NoneType' object has no attribute 'get'
Exception on /webhooks/rest/webhook [POST]
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 328, in receive
    sender_id = self._extract_sender(request)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 296, in _extract_sender
    return req.json.get("sender", None)
AttributeError: 'NoneType' object has no attribute 'get'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_RestInput.health                    GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_RestInput.receive                   POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5002
Exception on /webhooks/rest/webhook [POST]
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 328, in receive
    sender_id = self._extract_sender(request)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 296, in _extract_sender
    return req.json.get("sender", None)
AttributeError: 'NoneType' object has no attribute 'get'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_RestInput.health                    GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_RestInput.receive                   POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5002
Rasa process starting
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_RestInput.health                    OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_RestInput.receive                   OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5002
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, HEAD, GET             /static/[filename]
custom_webhook_RestInput.health                    OPTIONS, HEAD, GET             /webhooks/rest/
custom_webhook_RestInput.receive                   OPTIONS, POST                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5002
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.764 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998430170107}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张三' with intent '{'name': 'inform', 'confidence': 0.983106471847518}' and entities '[{'start': 0, 'end': 2, 'value': '张三', 'entity': 'patient-name', 'confidence': 0.7369984342255125, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张三)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, OPTIONS, HEAD             /static/[filename]
custom_webhook_RestInput.health                    GET, OPTIONS, HEAD             /webhooks/rest/
custom_webhook_RestInput.receive                   POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5002
Creating a new tracker for id 'default'.
Exception on /webhooks/rest/webhook [POST]
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 339, in receive
    input_channel=self.name()))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/agent.py", line 317, in handle_message
    return processor.handle_message(message)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 82, in handle_message
    tracker = self.log_message(message)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 129, in log_message
    self._handle_message_with_tracker(message, tracker)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 269, in _handle_message_with_tracker
    parse_data = self._parse_message(message)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 245, in _parse_message
    if (message.text.startswith(INTENT_MESSAGE_PREFIX) or
AttributeError: 'list' object has no attribute 'startswith'
Recreating tracker for id 'default'
Exception on /webhooks/rest/webhook [POST]
Traceback (most recent call last):
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nick/anaconda3/lib/python3.6/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/channels/channel.py", line 339, in receive
    input_channel=self.name()))
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/agent.py", line 317, in handle_message
    return processor.handle_message(message)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 82, in handle_message
    tracker = self.log_message(message)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 129, in log_message
    self._handle_message_with_tracker(message, tracker)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 269, in _handle_message_with_tracker
    parse_data = self._parse_message(message)
  File "/home/nick/anaconda3/lib/python3.6/site-packages/rasa_core/processor.py", line 245, in _parse_message
    if (message.text.startswith(INTENT_MESSAGE_PREFIX) or
AttributeError: 'list' object has no attribute 'startswith'
Recreating tracker for id 'default'
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.748 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998430170107}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张帆' with intent '{'name': 'inform', 'confidence': 0.9595538160516965}' and entities '[{'start': 0, 'end': 2, 'value': '张帆', 'entity': 'patient-name', 'confidence': 0.7369984342255125, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张帆)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'intent_request_patient_info': 1.0, 'prev_action_listen': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             OPTIONS, GET, HEAD             /static/[filename]
custom_webhook_RestInput.health                    OPTIONS, GET, HEAD             /webhooks/rest/
custom_webhook_RestInput.receive                   POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5002
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.765 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998271055365}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张帆' with intent '{'name': 'inform', 'confidence': 0.9378997686420448}' and entities '[{'start': 0, 'end': 2, 'value': '张帆', 'entity': 'patient-name', 'confidence': 0.6790340827163331, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张帆)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2015年8月24号' with intent '{'name': 'inform', 'confidence': 0.9293919848552771}' and entities '[{'start': 0, 'end': 10, 'value': '2015 年 8 月 24 号', 'entity': 'time', 'confidence': 0.9782061229900597, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张帆
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2015 年 8 月 24 号)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张帆
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2015 年 8 月 24 号
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998271055365}' and entities '[]'
Logged UserUtterance - tracker now has 25 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张帆' with intent '{'name': 'inform', 'confidence': 0.9378997686420448}' and entities '[{'start': 0, 'end': 2, 'value': '张帆', 'entity': 'patient-name', 'confidence': 0.6790340827163331, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 31 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张帆)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2015年8月26号' with intent '{'name': 'inform', 'confidence': 0.9461732685644137}' and entities '[{'start': 0, 'end': 10, 'value': '2015 年 8 月 26 号', 'entity': 'time', 'confidence': 0.9782470906552861, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 37 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张帆
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2015 年 8 月 26 号)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张帆
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2015 年 8 月 26 号
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'prev_request_form': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_utter_slots_values': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '查患者张三住院时间为2015年8月6号的患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.7788174077504902}' and entities '[{'start': 10, 'end': 19, 'value': '2015 年 8 月 6 号', 'entity': 'time', 'confidence': 0.9539467540549313, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 48 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Rasa process starting
Added 'nlp_spacy' to component cache. Key 'nlp_spacy-zh'.
/home/nick/anaconda3/lib/python3.6/site-packages/pykwalify/core.py:99: UnsafeLoaderWarning: 
The default 'Loader' for 'load(stream)' without further arguments can be unsafe.
Use 'load(stream, Loader=ruamel.yaml.Loader)' explicitly if that is OK.
Alternatively include the following in your code:

  import warnings
  warnings.simplefilter('ignore', ruamel.yaml.error.UnsafeLoaderWarning)

In most other cases you should consider using 'safe_load(stream)'
  data = yaml.load(stream)

Available web server routes: 
static                                             GET, HEAD, OPTIONS             /static/[filename]
custom_webhook_RestInput.health                    GET, HEAD, OPTIONS             /webhooks/rest/
custom_webhook_RestInput.receive                   POST, OPTIONS                  /webhooks/rest/webhook
Rasa Core server is up and running on http://localhost:5002
Creating a new tracker for id 'default'.
Building prefix dict from the default dictionary ...
Dumping model to file cache /tmp/jieba.cache
Loading model cost 0.977 seconds.
Prefix dict has been built succesfully.
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '患者信息' with intent '{'name': 'request_patient_info', 'confidence': 0.9999998271055365}' and entities '[]'
Logged UserUtterance - tracker now has 2 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: None
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['Form(request_form)', 'SlotSet(key: requested_slot, value: patient-name)']'
Bot utterance 'BotUttered(text: 请输入需要查询的患者名字, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '张山' with intent '{'name': 'inform', 'confidence': 0.9996550553735106}' and entities '[{'start': 0, 'end': 2, 'value': '张山', 'entity': 'patient-name', 'confidence': 0.6790340827163331, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 8 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: None
	requested_slot: patient-name
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: patient-name, value: 张山)', 'SlotSet(key: requested_slot, value: admission-time)']'
Bot utterance 'BotUttered(text: 请输入患者的住院时间, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
Recreating tracker for id 'default'
/home/nick/anaconda3/lib/python3.6/site-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size > 0` to check that an array is not empty.
  if diff:

Received user message '2015年8月16号' with intent '{'name': 'inform', 'confidence': 0.9634773689178517}' and entities '[{'start': 0, 'end': 10, 'value': '2015 年 8 月 16 号', 'entity': 'time', 'confidence': 0.9781399497138237, 'extractor': 'ner_crf'}]'
Logged UserUtterance - tracker now has 14 events
Current slot values: 
	admission-time: None
	bed-number: None
	department: None
	disease-name: None
	guide-name: None
	hospital-number: None
	inspection-name: None
	inspection-time: None
	laboratory-indicator: None
	literature-name: None
	medical-record-number: None
	order-name: None
	patient-name: 张山
	requested_slot: admission-time
Current tracker state [None, None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '23'
There is an active form 'request_form'
Predicted next action using policy_3_FormPolicy
Predicted next action 'request_form' with prob 1.00.
Calling action endpoint to run action 'request_form'.
Action 'request_form' ended with events '['SlotSet(key: admission-time, value: 2015 年 8 月 16 号)', 'Form(None)', 'SlotSet(key: requested_slot, value: None)']'
Bot utterance 'BotUttered(text: slots filled, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}]
There is a memorised next action '20'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'utter_slots_values' with prob 1.00.
Action 'utter_slots_values' ended with events '[]'
Bot utterance 'BotUttered(text: 查询结果:
 - patient-name: 张山
 - medical-record-number: None
 - hospital-number: None
 - department: None
 - admission-time: 2015 年 8 月 16 号
 - bed-number: None
 - inspection-name: None
 - inspection-time: None
 - laboratory-indicator: None
 - order-name: None
 - disease-name: None
, data: {
  "elements": null,
  "buttons": null,
  "attachment": null
})'
Current tracker state [None, {}, {'prev_action_listen': 1.0, 'intent_request_patient_info': 1.0}, {'intent_request_patient_info': 1.0, 'prev_request_form': 1.0}, {'prev_utter_slots_values': 1.0, 'intent_request_patient_info': 1.0}]
There is a memorised next action '1'
There is no active form
Predicted next action using policy_2_MemoizationPolicy
Predicted next action 'action_restart' with prob 1.00.
Action 'action_restart' ended with events '['Restarted()']'
Predicted next action 'action_listen' with prob 1.00.
Action 'action_listen' ended with events '[]'
